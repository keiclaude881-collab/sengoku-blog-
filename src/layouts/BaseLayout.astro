---
import '../styles/global.css';
import '../styles/typography.css';
import '../styles/components.css';
import BaseHead from '../components/BaseHead.astro';
import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';

interface Props {
  title:        string;
  description:  string;
  ogImage?:     string;
  type?:        "website" | "article";
  publishedAt?: string;
}
const { title, description, ogImage, type, publishedAt } = Astro.props;
---

<!doctype html>
<html lang="ja">
  <head>
    <BaseHead
      title={title}
      description={description}
      ogImage={ogImage}
      type={type}
      publishedAt={publishedAt}
    />
  </head>
  <body>
    <Nav />
    <main>
      <slot />
    </main>
    <Footer />
  </body>
</html>

<script>
  // スクロールフェードイン
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('visible');
          observer.unobserve(e.target);
        }
      });
    },
    { threshold: 0.1 }
  );
  document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
