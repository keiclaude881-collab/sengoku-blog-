---
interface Props {
  title:        string;
  description:  string;
  ogImage?:     string;
  type?:        "website" | "article";
  publishedAt?: string;
}
const {
  title,
  description,
  ogImage = "/images/default-ogp.svg",
  type = "website",
  publishedAt,
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const ga4Id = import.meta.env.GA4_MEASUREMENT_ID ?? "G-XXXXXXXXXX";
---

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>{title}</title>
<meta name="description" content={description} />
<link rel="canonical" href={canonicalURL} />
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="sitemap" href="/sitemap-index.xml" />

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;600;700;800&family=DM+Serif+Display:ital@0;1&family=Zen+Kaku+Gothic+New:wght@300;400;500;700&display=swap"
  rel="stylesheet"
/>

<!-- OGP -->
<meta property="og:title"       content={title} />
<meta property="og:description" content={description} />
<meta property="og:type"        content={type} />
<meta property="og:url"         content={canonicalURL} />
<meta property="og:image"       content={new URL(ogImage, Astro.site)} />
<meta property="og:site_name"   content="戦略の系譜" />
<meta property="og:locale"      content="ja_JP" />

<!-- Twitter Card -->
<meta name="twitter:card"        content="summary_large_image" />
<meta name="twitter:title"       content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image"       content={new URL(ogImage, Astro.site)} />

{type === "article" && publishedAt &&
  <meta property="article:published_time" content={publishedAt} />
}

<!-- Google Analytics (GA4) -->
<script async src={`https://www.googletagmanager.com/gtag/js?id=${ga4Id}`}></script>
<script define:vars={{ ga4Id }}>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', ga4Id);
</script>
